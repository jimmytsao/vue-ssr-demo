<!DOCTYPE html>
  <html lang="en">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>VueJS Demo</title>
      <link rel="stylesheet" href="/styles.css" />
      <link rel="shortcut icon" href="data:image/x-icon;," type="image/x-icon">
    </head>
    <body>
      <div id="app">
        <h1>Most Starred Vue Repos</h1>
        <list v-bind:repos="repos"></list>
        <button v-on:click="fetchRepos">Load More</button>
      </div>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.16.2/axios.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.4.2/vue.min.js"></script>
      <script>
        Vue.component('list', {
        template: `
        <ol>
            <li v-for="repo in repos">
            <p> Stars: {{repo['stargazers_count']}} </p>
            <a v-bind:href="repo['html_url']">{{repo['full_name']}}</a>
            <p>{{ repo.description }}</p>
            </li>
        </ol>
        `,
        props: ['repos']
        })

        const app = new Vue({
        el: '#app',
        data: {
            repos: []
        },
        created () {
            this.fetchRepos()
        },
        computed: {
            lastRepoId () {
            return (this.repos.length > 0)
                ? this.repos[this.repos.length - 1]
                : undefined
            }
        },
        methods: {
            fetchRepos () {
            const endpoint = 'https://api.github.com/search/repositories'
            axios
                .get(`${endpoint}?q=vue&sort=stars&since=${this.lastRepoId}`)
                .then(({ data }) => {
                this.repos = this.repos.concat(data.items)
                })
                .catch(console.error)
            }
        }
        })
      </script>
    </body>
  </html>